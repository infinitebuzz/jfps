<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:x2="http://www.w3.org/TR/xhtml2" xmlns:role=
"http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#" xmlns:state="http://www.w3.org/2005/07/aaa">
<!-- this validate fails in the javascript -->
<head>
  <title>jFPS</title>
  <link rel="stylesheet" type="text/css" href="css/jfps.css" />
  <script type="text/javascript" src="js/vvwlibrary.js"></script>
  <script type="text/javascript">
	var vendors = ['webkit', 'moz'];
	for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
		window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
		window.cancelAnimationFrame =
		  window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
	}

	var canvas = document.getElementById('canvas'),
		cw = canvas.width,
		ch = canvas.height,
		cx = null,
		fps = 30,
		bX = 30,
		bY = 30,
		mX = 10,
		mY = 20,
		interval     =    1000/fps,
		lastTime     =    (new Date()).getTime(),
		currentTime  =    0,
		delta = 0;

	function gameLoop() {
		window.requestAnimationFrame(gameLoop);

		currentTime = (new Date()).getTime();
		delta = (currentTime-lastTime);

		if(delta > interval) {

			cx.clearRect(0,0,cw,cw);

			cx.beginPath();
			cx.fillStyle = 'red';
			cx.arc(bX, bY, 20, 0, Math.PI * 360);
			cx.fill();
			if(bX >= cw || bX <= 0) { mX*=-1; }
			if(bY >= ch || bY <= 0) { mY*=-1; }

			bX+=mX;
			bY+=mY;

			lastTime = currentTime - (delta % interval);
		}
	}

	if (typeof (canvas.getContext) !== undefined) {
		cx = canvas.getContext('2d');

		gameLoop();
	}
  </script>
</head>

<body>
  <canvas id="canvas" width="400" height="400"></canvas>
</body>